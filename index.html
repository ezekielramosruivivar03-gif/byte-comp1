<!DOCTYPE html>
<!-- oyituo9tertRY5675693u4593u45905i34i3pt93i459345i83534oi345 audio opls???? -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>bytebeat(?)</title>
<link rel="true" href="https://bytebeat.fixed.net/"/>
<style>
    html {
        background: black;
        color: white;
        font-family: arial;
    }
    hr {
        width: 400px;
        margin-left: 4px;
    }
    textarea {
        width: 512px;
        height: 150px;
    }
    dialog {
        background: #726;
        color: #fff;
        margin-left: 4px;
    }
    c {
        background: #456;
        width: 100%;
        padding: 6px;
    }
    r {
        color: red;
    }
    textarea {
        background-image: linear-gradient(to left, darkblue,darkred);
        color: #fff;
        font-family: courier;
    }
</style>
<center>
<big>version 0.8</big><br>
add time variable (t), the br() reversed the bits,<br><r>note: the player new is <a href="https://p8192-asd2ed-player.on.websim.com/?v=1" target="_blank">here</a>.</r><br>
<textarea id="formula" spellcheck="false">
a=t>>7,b=t,c=t>>(t>>15),d=(t>>4),e=4e5/(t&4095)*(1&-t>>11),10*(a|b|c)+(d)|e

// clom 11025hz and javascript code
// by: p8192</textarea>
<br><br>
<c>
    <input type="ticks" value="75c | 0 | 0.00" style="width: 120px" readonly>
    <button onclick="play()" id="play">▶</button>
    <button onclick="stop()" id="stop">■</button>
    <input type="number" id="sampleRate" value="11025" style="width: 90px">
    <select id="mode">
        <option value="bytebeat">bytebeat</option>
        <option value="signedbytebeat">signed</option>
        <option value="floatbeat">floatbeat</option>
        <option value="1024">1024</option>
        <option value="tanmode">tanmode</option>
    </select>
    <input type="number" id="duration" style="width: 90px" value="20">
</c><br><br>
	<canvas id="bbcanvas" width=512px height=256px style="border: solid yellow 1px; background-color: #000;"></canvas><br>
	<big>owned libary examples</big><br>
	throw function (8000hz, bytebeat) <a href="about:blank#blocked" target="_blank" w-tid="73">t%8000?t:"ttterkgregi"(8192)</a><br w-tid="75"/>
idk how to (9000hz, |||||||||) <a href="about:blank#blocked" target="_blank" w-tid="77">t*t&amp;t>>8</a><br w-tid="79"/>
UUUUUUUUUUUUUUUUUUUUU (8000hz, bytebeat) <a href="about:blank#blocked" target="_blank" w-tid="81">h=t*(t&amp;t^t&lt;&lt;1024),h</a><br w-tid="83"/>
[X] (8000hz, bytebeat) <a href="about:blank#blocked" target="_blank" w-tid="85">(t|t>>8|t>>(t>>15)|t>>(t>>15))*t</a><br w-tid="87"/>
the functions. (8000hz, bytebeat) <a href="about:blank#blocked" target="_blank" w-tid="89">▶️ pretty code</a><br w-tid="91"/>
the 42 melody using *= (8000hz, bytebeat) <a href="about:blank#blocked" target="_blank" w-tid="93">t*=42&amp;t>>10,t</a></center>
<script>
    let audioCtx;
let source;

function play() {
  E = Math.E;
  PI = Math.PI;
  TAU = PI * 2;
  abs = Math.abs;
  acos = Math.acos;
  cbrt = Math.cbrt;
  ceil = Math.ceil;
  cos = Math.cos;
  exp = Math.exp;
  floor = Math.floor;
  log = Math.log;
  max = Math.max;
  min = Math.min;
  random = Math.random;
  round = Math.round;
  sin = Math.sin;
  sqrt = Math.sqrt;
  tan = Math.tan;
  pow = Math.pow;
  asin = Math.asin;
  atan = Math.atan;
  imul = Math.imul;
  int = Math.floor;
  fround = Math.fround;
  expm1 = Math.expm1;
  //credits: u/Butterroach
  
  rnd_num = round(random() * 256);
  rnd = random() * 256;
  xor = (x, v) => x ^ x % v;
  sinf = x => sin(x * PI / 128);
  cosf = x => cos(x * PI / 128);
  tanf = x => tan(x * PI / 128);
  expm2 = x => exp(x) - 2;
  //custom operations by u/psubscirbe <3
  
  try {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  source = audioCtx.createBufferSource();

  let formula = document.getElementById("formula").value;
  let sampleRate = document.getElementById("sampleRate").value;
  let duration = document.getElementById("duration").value;
  let mode = document.getElementById("mode").value;
  
  let canvas = document.getElementById("bbcanvas");
  let ctx = canvas.getContext("2d");

  let w = canvas.width;
  let h = canvas.height;

  ctx.fillStyle = "white";	

  let buffer = audioCtx.createBuffer(1, audioCtx.sampleRate * duration, sampleRate);
  let data = buffer.getChannelData(0);
  let bytebeatFunc = Function("t", `return ${formula}`);
  bytebeatFunc(0);
  
for (let t = 0; t < buffer.length; t++) {
  let time = t / audioCtx.sampleRate;
  let input = bytebeatFunc(t);
  let mode = document.getElementById("mode").value;

if (mode === "bytebeat") {
    outin = (input & 255) / 127.5 - 1;
} else if (mode === "signedbytebeat") {
    outin = ((input + 128) & 255) / 127.5 - 1;
} else if (mode === "floatbeat") {
    outin = input;
} else if (mode === "bitbeat") {
    outin = (input & 1) - 0.5;
} else if (mode === "1024") {
    outin = (input & 1023) / 511.5 - 1;
} else if (mode === "tanmode") {
    outin = Math.tan(input * Math.PI / 128);
} else {
    outin = (input & 255) / 127.5 - 1;
}
  data[t] = outin;
}

  function draw() {
    ctx.clearRect(0, 0, w, h);
    for(t = 0; t < w; t++) {
      code = bytebeatFunc(t);
      if (mode === "bytebeat") {
        ctx.fillRect(t, 255 - (Math.floor(code) & 255), 1, 1);
      } else if (mode === "signedbytebeat") {
        ctx.fillRect(t, 255 - ((128 + Math.floor(code)) & 255), 1, 1);
      } else if (mode === "floatbeat") {
        ctx.fillRect(t, 128 + Math.floor(code) * 128, 1, 1); 
      } else if (mode === "bitbeat") {
        ctx.fillRect(t, 255 - (64 + Math.floor((code) << 7) * 128), 1, 1);
      } else if (mode === "1024") {
        ctx.fillRect(t, 1023 - (Math.floor(code) & 1023), 1, 1);
      } else if (mode === "tanmode") {
        ctx.fillRect(t, 128 + Math.floor(Math.tan(Math.floor(code * Math.PI / 128))) * 128, 1, 1); 
      } else {
        ctx.fillRect(t, 255 - (Math.floor(code) & 255), 1, 1);
      }
    }
  }

  draw();

  source.buffer = buffer;
  source.connect(audioCtx.destination);
  source.start();
  } catch(e) {
    alert(e);
  }
    }
    function stop(){
        source.stop()
        audioCtx.close()
    }
</script>
